# Linux  目录结构和文件属性管理

------



# Linux目录结构和路径



#### PHS介绍

> Filesystem Hierarchy Standard 介绍

文件系统层次化标准，多数linux 班班采用这种文件组织形式，类似于window操作系统中C盘的文件目录。

PHS采用树形结构组织文件。

PHS定义了系统中每个区域的用途，所需要的最小构成的文件和目录，同事还给出了例外处理与矛盾处理

**PHS定义了两层规范**

+ `/`下面的各个目录应该要放什么文件数据，例如 `/etc`要放设置文件 `/bin  /sbin`应该放置可执行文件等
+ 第二层则是针对 `/usr  /var` 这两个目录的子目录来定义，例如 `/var/log`放置系统登录文件，`/usr/share` 放置共享数据等。





## 01.linux 目录结构介绍

+ `/`
  + `bin`
    + 用户二进制文件
    + 包含二进制的可执行文件，你需要的常见的linux命令都位于此目录下
  + `sbin`
    + 系统二进制文件
    + 这个目录下的命令通常由系统管理员使用，对系统进行维护
  + `etc`
    + 配置文件
    + 包含所有程序所需要的的配置文件，也包含用于启动、停止单个程序的启动和关闭shell脚本。
  + `dev`
    + 设备文件
    + 包括终端设备、USB或连接到系统的任何设备，如网卡等
  + `proc`
    + 进程信息文件
    + 这是一个虚拟的文件系统，包含有关正在运行的进程信息
  + `usr`
    + 用户程序
    + 包含二进制文件、库文件、文档和二级程序的源代码
      + /usr/bin中包含用户程序的二进制文件。如果你在 /bin中找不到 二进制文件，到 /usr/bin 目录看看
      + /usr/sbin 中包含系统管理员的二进制文件。如果你在 /sbin中找不到系统二进制文件，到/usr/sbin 来看看
      + /usr/lib 中包含了 /usr/bin 和 /usr/sbin 用到的库
      + /usr/local 中包含了从源安装的用户程序
  + `home`
    + Home 目录
    + 包含所有用户的个人档案，Linux是多用户的系统，所以用该目录保存各个用户的信息
  + `boot`
    + 引导加载程序
    + 包含引导加载程序相关的文件
  + `lib`
    + 系统库
    + 包含支持位于 /lib 和 /sbin下的二进制 文件的库文件
  + `opt`
    + 可选的附件应用程序
    + 给主机额外安装软件所摆放的目录，以前的Linux系统中，习惯放置在 /usr/local 目录下 
  + `/mnt 、 /media`
    + 挂载目录
    + 光盘默认挂载点，通常挂载于 `/mnt/cdrom` 下，也不一定，可以选择任意位置进行挂载
  + `/root`
    + 管理员家目录
  + `srv`
  + `var`
  + `tmp`

在这里所介绍的目录是在 linux 系统中常见的目录，不同厂商的linux有所差异，有的版本中会出现额外作用的目录，这个就需要具体问题具体对待了。



## 02. 目录和设备节点

我们已经知道目录是用来存放文件的，不同的目录存放的文件作用不同，那么我们来看下 **设备节点** 是什么？

一个设备节点 其实就是一个文件， linux中称为设备文件。有一点必要说明的是，在linux中，所有的设备访问都是通过文件的方式，一般的数据文件程序普通文件，设备节点称为设备文件，而这些设备节点，或者说是设备文件都统一放在 `/dev`目录下，简单来说，设备节点 是一种特殊的文件，只不过这个文件存放的不是一般的数据，而是 和你计算机中的设备相关联的。



## 03. `.` 和 `..`

在linux 系统中，使用 `ls -a`, 会发现每一个目录下都包含 两个目录。

+ `.` ：当前目录，也就是你使用 `pwd`所查看到的路径
+ `..` ：上一级目录



## 04. 绝对路径和相对路径

linux的路径书写方式有两种，绝对路径和相对路径

+ 绝对路径：路径的写法一般由根目录`/`写起的，以跟目录为起点
+ 相对路径：路径的写法不是由根目录`/`写起的，不以跟目录为起点



------



# linux目录结构和文件属性管理



## 01. linux的文件保存

假如有一个用户在linux系统中编辑了一个文件，编辑完内容后，关闭编辑器时会问用户该如何命名这个文件，设置完名称之后会选择一个目录将该文件保存到指定目录下，在这个例子中包含了linux中与文件相关的三个组成部分

+ 数据：就是文件的内容，保存在一个叫 data（数据块）的结构中
+ 元数据：保存一个文件的特征的系统数据，用来保存除了文件内容和文件名以外的与文件相关的信息，诸如文件的创建者，日期，大小等，保存在一个 **inode**(i节点)的结构中。
+ 文件名：用来保存文件名称，文件名保存在一个叫 dentry(目录项)的 结构中

## 02. i节点介绍

inode是用来保存文件的元数据的，除此之外还保存文件相关属性，如链接数等。我们通过类似`stat hello.txt` 这条命令查看指定文件的 `inode` 信息



## 03. 链接介绍

在linux中链接分为硬链接、软链接、空链接、递归链接等

#### 硬链接

允许一个文件拥有多个有效路径名，这样用户就可以建立硬链接到重要的文件，以防止“误删”源数据，不过硬链接只能在同一文件系统中的文件之间进行连接

`ln aa hard`

#### 软链接

也叫符号链接，类似与windows系统中的创建快捷方式，与硬链接不同，软链接就是一个普通文件，软链接可对文件或目录创建

`ln -s aa soft`

+ 绝对软链接和相对软链接区别

  就是绝对路径与相对路径的区别，绝对路径可以防止链接文件后续被移动。

#### 总结

**硬链接不能链目录，不能跨文件系统，软链接可以；源文件删除后软链接失效，硬链接依然可以用**



#### 空链接

就是软链接指向的源文件不存在了，包括源文件被删除、改名。



#### 递归链接

如果用户创建了两个软链接，linka 与 linkb关联，而linka 又与 linkb 关联，这时候就会出现递归链接



## 04. 时间戳

时间戳是指格林威治时间（1970年01月01日00时00分00秒）北京时间（1970年01月01日08时00分00秒）起到现在的总毫秒数。

当我们使用 `stat` 命令查看文件的时候，除了创建时间你会发现三个跟时间戳相关的信息

| 缩写  | 命令     | 目的                                |
| ----- | -------- | ----------------------------------- |
| Atime | 访问时间 | 文件数据每次被阅读后的更新          |
| Ctime | 改变时间 | 文件的 i-节点信息每次被改变后都更新 |
| Mtime | 修改时间 | 文件数据每次被改变后的更新          |



## 05. 常用目录管理命令介绍

```shell
ls：
	-a: 全部文件，包括隐藏文件一起列出
	-d: 只是列出目录本身，无文件
	-l: 列出文件的属性与权限等
	
	
cp：
	-i: 若文件存在，询问是否覆盖
	-p: 连同文件的属性一起复制，而非复制文件本身
	-r: 递归复制
	

rm:
	-f: force,强制删除
	-i: 删除前询问是狗删除
	-r: 递归删除
	
	
cat:
	-n: 打印行号
	
mkdir:
	-p: 递归
```